{% extends 'base.html' %}

{% block css %}
{% load static %}
<link rel="stylesheet" href="{% static 'forgot_password.css' %}">
{% endblock %}

{% block content %}
<h2>Forgot Password</h2>

{% if message %}
<p class="message">{{ message }}</p>
{% endif %}

<form method="POST">
    {% csrf_token %}
    
    <!-- Step 1: Enter Email -->
    <div id="step-email" class="form-step active">
        <h3>Enter your registered email</h3>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="Enter your registered email" required>
        <button type="submit">Send Reset Link</button>
    </div>

    <!-- Step 2: Reset Password -->
    {% if reset_token %}
    <div id="step-reset-password" class="form-step">
        <h3>Reset Your Password</h3>
        <label for="new_password">New Password:</label>
        <input type="password" id="new_password" name="new_password" placeholder="Enter new password" required>
        
        <label for="confirm_password">Confirm New Password:</label>
        <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm new password" required>

        <input type="hidden" name="reset_token" value="{{ reset_token }}">
        <button type="submit">Reset Password</button>
    </div>
    {% endif %}
</form>
<a href="{% url 'login' %}">Back to Login</a>

<script>
// Optionally, add JavaScript for improved user experience
</script>
{% endblock %}
